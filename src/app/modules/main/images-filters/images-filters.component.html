<div class="container-fluid overflow-hidden h-auto d-flex row p-5 mt-3 justify-content-between">

    <div class="pt-5 d-flex custom-card row col-12">


        <div class="d-flex flex-row align-items-center mb-2">
            <label for="file" class="btn btn-primary flex-shrink-0">
                <span>Load File</span>
                <input (change)="loadFile($event)" type="file" accept="image/*"  
                multiple="false" name="file" id="file" hidden required>
            </label>

            <p class="w-100 m-0 file-name-container ms-2 ps-1 mb-2 pb-2 fs-6">
                <ng-container *ngIf="(this.imageStateService.originalFileName| async )as filename">
                    {{filename}}
                </ng-container>
            </p>
        </div>


        <!-- SHOW IMAGE AND RESULT IMAGE -->
        
        <app-filter-image 
        *ngIf="!(this.imageStateService.errorData| async); else errorTemplate"
        [originalImage]="(imageStateService.originalImageSubject | async)?.file"
        [resultImage]="(imageStateService.resultImageSubject | async)?.file"
        [isOriginalImageToggled]="(imageStateService.isOriginalImageToggledSubject | async)"
        [filterName]="(imageStateService.resultImageSubject| async)?.filter"
        >
        </app-filter-image>


        <!-- SHOW ERROR -->

        <ng-template #errorTemplate>
            <div class="alert"  role="alert"
            [ngClass]="(this.imageStateService.errorData | async)?.severity === 'danger'? 'alert-danger': 'alert-warning'">
                <strong *ngIf="(this.imageStateService.errorData | async)?.code as code">{{code}}</strong>
                <span *ngIf="(this.imageStateService.errorData | async)?.message as message">
                    {{message}}
                </span>
            </div>
        </ng-template>
        
        <!-- FORM FOR SUBMIT IMAGE TO FILTER API -->

        <app-filter-form 
        class="p-0"
        [isOriginalImageToggled]="(imageStateService.isOriginalImageToggledSubject | async)"
        [originalImage]="(imageStateService.originalImageSubject | async)?.file"
        [selectedFilter]="imageStateService.SelectedFilter | async"
        [resultImage]="(imageStateService.resultImageSubject | async)?.file"
        ></app-filter-form>
       
    </div>

</div>